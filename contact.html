<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Bryan Yuen Personal Profile</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
    <script src="https://www.gstatic.com/firebasejs/5.9.0/firebase.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>

    <script>
        // Initialize Firebase
        var config = {
            apiKey: "AIzaSyCkW5kLw1F-WwodPwQTbNGwf77hLHhx30w",
            authDomain: "bryan-profile.firebaseapp.com",
            databaseURL: "https://bryan-profile.firebaseio.com",
            projectId: "bryan-profile",
            storageBucket: "bryan-profile.appspot.com",
            messagingSenderId: "3141904489"
        };
        firebase.initializeApp(config);

        function signOut(){
            firebase.auth().signOut().then(function() {
                alert("Signed out!");
                window.location.href = './index.html';
            }).catch(function(error) {
                // An error happened.
            });
        }

    </script>
</head>
<body>
<nav class="navbar navbar-expand-lg bg-dark navbar-dark">
    <a class="navbar-brand" href=./index.html>Bryan Yuen</a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#collapsibleNavbar">
        <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse justify-content-end" id="collapsibleNavbar">
        <ul class="navbar-nav">
            <li class="nav-item">
                <a class="nav-link" href=aboutme.html>About Me</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href=projects.html>Projects</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href=interest.html>Interest</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href=recommend.html>Tech Channels</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href=message.html>Message Board</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href=contact.html>Contact Me</a>
            </li>
            <li class="btn btn-primary btn-sm" onclick="signOut()">
                <a class="nav-link" href="#">Sign Out</a>
            </li>
        </ul>
    </div>
</nav>
<br>
<div class="container">
    <h2>Contact Me</h2>
    <form action="#" method="post">
        <div class="form-group">
            <label for="con_name">Name:</label>
            <input type="text" class="form-control" id="con_name" placeholder="Enter Name" name="con_name" required>
        </div>
        <div class="form-group">
            <label for="con_email">E-mail:</label>
            <input type="email" class="form-control" id="con_email" placeholder="Enter e-mail" name="con_email" required>
        </div>
        <div class="form-group">
            <label for="con_feedback">Feedback:</label>
            <textarea class="form-control" id="con_feedback" name="con_feedback" rows="4" oninput="badword()" required></textarea>
        </div>
        <label for="reason">Reason Of Contact</label>
        <select class="custom-select my-1 mr-sm-2" id="reason" name="reason">
            <option value="gen">General Inquiry</option>
            <option value="job">Job Opportunities</option>
            <option value="bug">Reporting bug</option>
            <option value="other">Other</option>
        </select>
        <br>
        <button type="button" class="btn btn-primary" onclick="confeedback()">Submit</button>
    </form>
</div>
<br>
<br>
<br>
<footer class="page-footer font-small bg-dark fixed-bottom">
    <div class="footer-copyright text-center text-light py-3">Â© 2019 Copyright : Bryan Yuen
    </div>
</footer>
<script>
    var db = firebase.firestore();
    function confeedback() {

        var cn = document.getElementById("con_name").value;
        var ce = document.getElementById("con_email").value;
        var cm = document.getElementById("con_feedback").value;
        var cy = document.getElementById("reason").value;

        if ((cn != '') && (ce != '') && (cm != '') && (cy != '')) {
            db.collection("contact").add({
                con_name: cn,
                con_email: ce,
                con_fb: cm,
                con_reason: cy,
            })
                .then(function (docRef) {
                    console.log("Document written with ID: ", docRef.id);
                })
                .catch(function (error) {
                    console.error("Error adding comment: ", error);
                });

            document.getElementById("con_name").value = "";
            document.getElementById("con_email").value = "";
            document.getElementById("con_feedback").value = "";
            document.getElementById("reason").reset();
            alert("Message Sent")
        }
        else{
            alert("All Inputs are required, please fill in all areas")
        }
    }

    function badword() {
        var badwords = ['fuck','shit','gay','bitch'];
        var words = document.getElementById("con_feedback").value;
        if (badwords.includes(words.toLowerCase())) {
            document.getElementById("con_feedback").value ='';
            alert("Please do not use badwords");
        }
    }


</script>
</body>
</html>